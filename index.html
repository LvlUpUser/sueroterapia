<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cl√≠nica 4 Elements - Protocolos IV Avanzados</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Configuraci√≥n Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        medical: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        @media print {
            body * { visibility: hidden; }
            #print-section, #print-section * { visibility: visible; }
            #print-section {
                position: absolute;
                left: 0; top: 0;
                width: 100%;
                margin: 0; padding: 0;
                background: white;
            }
            .no-print { display: none !important; }
            @page { margin: 0; size: A4; }
        }
        .fade-in { animation: fadeIn 0.4s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Toggle Switch Styles */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #0ea5e9;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #0ea5e9;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased selection:bg-medical-100">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONOS ---
        const Icon = ({ name, className }) => {
            const icons = {
                printer: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></svg>,
                trash: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
                search: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
                mic: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="23"/><line x1="8" x2="16" y1="23" y2="23"/></svg>,
                alert: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
                euro: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 10h12"/><path d="M4 14h9"/><path d="M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2"/></svg>,
                clock: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
                droplet: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 22a7 7 0 0 0 7-7c0-2-5-9-5-9S9 13 9 15a7 7 0 0 0 3 7z"/></svg>,
                user: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
                shield: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
                calendar: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            };
            return icons[name] || null;
        };

        // --- PRECIOS (Desde Facturas) ---
        const PRICES = {
            suero500: 2.50, suero250: 2.20,
            vitC: 0.45, gluta: 1.00, bComplex: 0.70, magnesio: 0.40,
            calcio: 0.60, procaina: 0.50, nad: 15.00, carnitina: 0.90,
            oligo: 1.00, zinc: 0.90, inositol: 0.40, biotina: 0.60,
            b5: 0.80, arginina: 1.00, taurina: 0.50, triptofano: 0.50,
            fungible: 5.00 // Agujas, v√≠as, desinfecci√≥n
        };

        // --- DATABASE DE PROTOCOLOS (7.0) ---
        const PROTOCOLS_DB = [
            {
                id: 'equilibrio-vital',
                name: '1Ô∏è‚É£ Equilibrio Vital Mujer',
                subtext: 'Menopausia / Perimenopausia',
                target: ['sofocos', 'insomnio', 'ansiedad', 'fatiga', 'menopausia'],
                frequency: '7-10 d√≠as',
                sessions: [
                    {
                        name: 'S1: Neuroendocrina',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60-75 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Tript√≥fano 10 mg/ml", qty: 10, price: PRICES.triptofano, id: 'trip' },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Cloruro Calcio", qty: 5, price: PRICES.calcio },
                            { name: "Complejo B", qty: 5, price: PRICES.bComplex }
                        ]
                    },
                    {
                        name: 'S2: Adaptaci√≥n + Energ√≠a',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Complejo B", qty: 5, price: PRICES.bComplex },
                            { name: "Oligoelementos (Zn/Se)", qty: 5, price: PRICES.oligo }
                        ]
                    },
                    {
                        name: 'S3: Mantenimiento Calmante',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Taurina", qty: 10, price: PRICES.taurina },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Oligoelementos (Zn/Se)", qty: 5, price: PRICES.oligo }
                        ]
                    }
                ]
            },
            {
                id: 'mujer-calma',
                name: '2Ô∏è‚É£ Mujer en Calma',
                subtext: 'Endometriosis / Dolor P√©lvico',
                target: ['endometriosis', 'dolor', 'inflamaci√≥n', 'pelvico'],
                frequency: '10-14 d√≠as',
                sessions: [
                    {
                        name: 'S1: Antiinflamatoria Profunda',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '75-90 min', speed: 'Muy Lenta',
                        ingredients: [
                            { name: "Glutati√≥n", qty: 20, price: PRICES.gluta },
                            { name: "Vitamina C", qty: 20, price: PRICES.vitC },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Proca√≠na 1%", qty: 5, price: PRICES.procaina, id: 'procaina' }
                        ]
                    },
                    {
                        name: 'S2: Detox + Soporte',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60-75 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Glutati√≥n", qty: 10, price: PRICES.gluta },
                            { name: "Vitamina C", qty: 20, price: PRICES.vitC },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Oligoelementos (Zn/Se)", qty: 5, price: PRICES.oligo }
                        ]
                    },
                    {
                        name: 'S3: Mantenimiento',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Taurina", qty: 10, price: PRICES.taurina }
                        ]
                    }
                ]
            },
            {
                id: 'origen-vida',
                name: '3Ô∏è‚É£ Origen Vida',
                subtext: 'Fertilidad',
                target: ['fertilidad', 'embarazo', 'ovarios', 'reserva'],
                frequency: '7-10 d√≠as',
                sessions: [
                    {
                        name: 'S1: Inicio NAD+',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '90 min', speed: 'Muy Lenta (NAD+)',
                        ingredients: [
                            { name: "NAD+", qty: 5, price: PRICES.nad, id: 'nad' },
                            { name: "L-Carnitina", qty: 10, price: PRICES.carnitina },
                            { name: "Vitamina C", qty: 5, price: PRICES.vitC }
                        ]
                    },
                    {
                        name: 'S2: Micronutrici√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "L-Carnitina", qty: 10, price: PRICES.carnitina },
                            { name: "Oligoelementos", qty: 10, price: PRICES.oligo },
                            { name: "Complejo B", qty: 5, price: PRICES.bComplex }
                        ]
                    },
                    {
                        name: 'S3: Consolidaci√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '90 min', speed: 'Muy Lenta',
                        ingredients: [
                            { name: "NAD+", qty: 5, price: PRICES.nad, id: 'nad' },
                            { name: "L-Carnitina", qty: 10, price: PRICES.carnitina },
                            { name: "Oligoelementos", qty: 10, price: PRICES.oligo },
                            { name: "Vitamina C", qty: 5, price: PRICES.vitC }
                        ]
                    }
                ]
            },
            {
                id: 'reinicio-metabolico',
                name: '4Ô∏è‚É£ Reinicio Metab√≥lico',
                subtext: 'Control de Peso',
                target: ['peso', 'metabolismo', 'grasa', 'adelgazar'],
                frequency: '7 d√≠as',
                sessions: [
                    {
                        name: 'S1: Activaci√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "L-Carnitina", qty: 10, price: PRICES.carnitina },
                            { name: "Inositol", qty: 10, price: PRICES.inositol },
                            { name: "Oligoelementos (Zn/Cr)", qty: 5, price: PRICES.oligo }
                        ]
                    },
                    {
                        name: 'S2: Hep√°tico-Antioxidante',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Glutati√≥n", qty: 10, price: PRICES.gluta },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio }
                        ]
                    },
                    {
                        name: 'S3: Regulaci√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Inositol", qty: 10, price: PRICES.inositol },
                            { name: "Oligoelementos", qty: 5, price: PRICES.oligo },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio }
                        ]
                    }
                ]
            },
            {
                id: 'raiz-fuerte',
                name: '5Ô∏è‚É£ Ra√≠z Fuerte',
                subtext: 'Cabello / U√±as',
                target: ['cabello', 'pelo', 'u√±as', 'caida'],
                frequency: '7-14 d√≠as',
                sessions: [
                    {
                        name: 'S1: Nutrici√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '45-60 min', speed: 'Media',
                        ingredients: [
                            { name: "Biotina", qty: 10, price: PRICES.biotina, id: 'biotina' },
                            { name: "Vitamina B5", qty: 5, price: PRICES.b5 },
                            { name: "Oligoelementos", qty: 10, price: PRICES.oligo }
                        ]
                    },
                    {
                        name: 'S2: Antioxidante',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Glutati√≥n", qty: 10, price: PRICES.gluta },
                            { name: "Oligoelementos", qty: 5, price: PRICES.oligo }
                        ]
                    },
                    {
                        name: 'S3: Consolidaci√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Biotina", qty: 10, price: PRICES.biotina, id: 'biotina' },
                            { name: "Complejo B", qty: 5, price: PRICES.bComplex },
                            { name: "Oligoelementos", qty: 10, price: PRICES.oligo }
                        ]
                    }
                ]
            },
            {
                id: 'piel-dentro',
                name: '6Ô∏è‚É£ Piel desde Dentro',
                subtext: 'Glow / Antiaging',
                target: ['piel', 'arrugas', 'glow', 'manchas'],
                frequency: '10-14 d√≠as',
                sessions: [
                    {
                        name: 'S1: Glow Potente',
                        base: { name: "SF 0.9%", qty: 250, price: PRICES.suero250 },
                        duration: '60 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Glutati√≥n", qty: 20, price: PRICES.gluta },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC, id: 'vitc' }
                        ]
                    },
                    {
                        name: 'S2: Nutrici√≥n Celular',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Complejo B", qty: 5, price: PRICES.bComplex },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC, id: 'vitc' },
                            { name: "Oligoelementos", qty: 5, price: PRICES.oligo }
                        ]
                    },
                    {
                        name: 'S3: Mantenimiento',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Glutati√≥n", qty: 10, price: PRICES.gluta },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC, id: 'vitc' },
                            { name: "Taurina", qty: 10, price: PRICES.taurina }
                        ]
                    }
                ]
            },
            {
                id: 'impulso-activo',
                name: '7Ô∏è‚É£ Impulso Activo',
                subtext: 'Deporte / Recuperaci√≥n',
                target: ['deporte', 'musculo', 'fatiga', 'lesion'],
                frequency: '7 d√≠as',
                sessions: [
                    {
                        name: 'S1: Rendimiento',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "L-Arginina", qty: 10, price: PRICES.arginina, id: 'arginina' },
                            { name: "L-Carnitina", qty: 10, price: PRICES.carnitina },
                            { name: "Taurina", qty: 10, price: PRICES.taurina }
                        ]
                    },
                    {
                        name: 'S2: Recuperaci√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Taurina", qty: 10, price: PRICES.taurina }
                        ]
                    },
                    {
                        name: 'S3: Consolidaci√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "L-Carnitina", qty: 10, price: PRICES.carnitina },
                            { name: "Oligoelementos", qty: 5, price: PRICES.oligo },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio }
                        ]
                    }
                ]
            },
            {
                id: 'reset-celular',
                name: '8Ô∏è‚É£ Reset Celular',
                subtext: 'Myers Cl√°sico',
                target: ['reset', 'estres', 'cansancio'],
                frequency: '14 d√≠as',
                sessions: [
                    {
                        name: 'S1: Myers Completo',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Complejo B", qty: 10, price: PRICES.bComplex },
                            { name: "Vitamina C", qty: 15, price: PRICES.vitC },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio }
                        ]
                    },
                    {
                        name: 'S2: Myers Reducido',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '45 min', speed: 'Media',
                        ingredients: [
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio }
                        ]
                    },
                    {
                        name: 'S3: Antioxidante',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Media',
                        ingredients: [
                            { name: "Glutati√≥n", qty: 10, price: PRICES.gluta },
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC }
                        ]
                    }
                ]
            },
            {
                id: 'intestino-equilibrio',
                name: '9Ô∏è‚É£ Intestino en Equilibrio',
                subtext: 'SIBO / Disbiosis',
                target: ['sibo', 'barriga', 'gases', 'diarrea'],
                frequency: '10-14 d√≠as',
                sessions: [
                    {
                        name: 'S1: Mucosa + Detox',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60-75 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Oligoelementos (Zn)", qty: 5, price: PRICES.oligo },
                            { name: "Glutati√≥n", qty: 5, price: PRICES.gluta }
                        ]
                    },
                    {
                        name: 'S2: Neurodigestivo',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Taurina", qty: 10, price: PRICES.taurina },
                            { name: "Inositol", qty: 10, price: PRICES.inositol }
                        ]
                    },
                    {
                        name: 'S3: Consolidaci√≥n',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Vitamina C", qty: 10, price: PRICES.vitC },
                            { name: "Oligoelementos", qty: 5, price: PRICES.oligo },
                            { name: "Glutati√≥n", qty: 5, price: PRICES.gluta }
                        ]
                    }
                ]
            },
            {
                id: 'calma-interior',
                name: 'üîü Calma Interior',
                subtext: 'Ansiedad / Insomnio',
                target: ['ansiedad', 'insomnio', 'nervios'],
                frequency: '7-10 d√≠as',
                sessions: [
                    {
                        name: 'S1: Descarga SNC',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60-75 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Taurina", qty: 10, price: PRICES.taurina },
                            { name: "Inositol", qty: 10, price: PRICES.inositol }
                        ]
                    },
                    {
                        name: 'S2: Sue√±o',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60-75 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Taurina", qty: 10, price: PRICES.taurina },
                            { name: "Tript√≥fano", qty: 10, price: PRICES.triptofano, id: 'trip' }
                        ]
                    },
                    {
                        name: 'S3: Mantenimiento',
                        base: { name: "SF 0.9%", qty: 500, price: PRICES.suero500 },
                        duration: '60 min', speed: 'Lenta',
                        ingredients: [
                            { name: "Sulfato Magnesio", qty: 10, price: PRICES.magnesio },
                            { name: "Oligoelementos", qty: 5, price: PRICES.oligo },
                            { name: "Taurina", qty: 10, price: PRICES.taurina }
                        ]
                    }
                ]
            }
        ];

        // --- COMPONENTE PRINCIPAL ---
        function SueroterapiaApp() {
            const [patient, setPatient] = useState({ name: '', age: '', sex: '', symptoms: '' });
            const [flags, setFlags] = useState({
                bipolar: false,
                antidepressants: false,
                glaucoma: false,
                hypotension: false,
                migraine: false,
                thyroid: false,
                siboMethane: false
            });
            const [selectedProtocol, setSelectedProtocol] = useState(null);
            const [activeSession, setActiveSession] = useState(0);
            const [showReport, setShowReport] = useState(false);
            const [isListening, setIsListening] = useState(false);

            // --- L√≥gica del √Årbol de Decisi√≥n (Safety) ---
            const getSafeSession = (session) => {
                if (!session) return null;
                let safeIngredients = [...session.ingredients];
                let warnings = [];
                let modified = false;

                // Regla 1: Tript√≥fano
                if (flags.bipolar || flags.antidepressants || flags.siboMethane) {
                    const hasTrip = safeIngredients.find(i => i.id === 'trip');
                    if (hasTrip) {
                        safeIngredients = safeIngredients.filter(i => i.id !== 'trip');
                        warnings.push(`TRIPT√ìFANO RETIRADO (${flags.bipolar ? 'Bipolaridad' : flags.antidepressants ? 'Antidepresivos' : 'SIBO Metano'}).`);
                        modified = true;
                    }
                }

                // Regla 2: NAD+
                if (flags.bipolar || flags.glaucoma) {
                    const hasNad = safeIngredients.find(i => i.id === 'nad');
                    if (hasNad) {
                        // En NAD+ el bloqueo suele ser total o alerta grave
                         if (flags.bipolar) {
                            safeIngredients = safeIngredients.filter(i => i.id !== 'nad');
                            warnings.push("NAD+ RETIRADO (Contraindicado en Bipolaridad).");
                            modified = true;
                         } else {
                             warnings.push("ALERTA NAD+: Precauci√≥n por Glaucoma.");
                         }
                    }
                }

                // Regla 3: Hipotensi√≥n (Arginina/Proca√≠na)
                if (flags.hypotension) {
                    const hasVasodilator = safeIngredients.find(i => i.id === 'arginina' || i.id === 'procaina');
                    if (hasVasodilator) {
                        warnings.push("ALERTA HIPOTENSI√ìN: Vigilar TA por vasodilatadores.");
                    }
                }
                
                // Regla 4: Biotina y Tiroides
                if (flags.thyroid) {
                     const hasBiotina = safeIngredients.find(i => i.id === 'biotina');
                     if (hasBiotina) warnings.push("ALERTA BIOTINA: Puede alterar anal√≠tica tiroidea.");
                }

                // Regla 5: Migra√±a y VitC
                if (flags.migraine) {
                     const hasVitC = safeIngredients.find(i => i.id === 'vitc' && i.qty >= 15);
                     if (hasVitC) warnings.push("ALERTA MIGRA√ëA: Dosis alta Vitamina C. Infundir muy lento.");
                }

                return { ...session, ingredients: safeIngredients, warnings, modified };
            };

            const safeProtocol = useMemo(() => {
                if (!selectedProtocol) return null;
                const safeSessions = selectedProtocol.sessions.map(s => getSafeSession(s));
                return { ...selectedProtocol, sessions: safeSessions };
            }, [selectedProtocol, flags]);

            const currentSession = safeProtocol ? safeProtocol.sessions[activeSession] : null;

            // --- C√°lculos ---
            const calculateCost = (session) => {
                if (!session) return 0;
                const ingredientsCost = session.ingredients.reduce((acc, curr) => acc + (curr.price * curr.qty), 0);
                const baseCost = session.base.price;
                return (ingredientsCost + baseCost + PRICES.fungible).toFixed(2);
            };

            // --- Handlers ---
            const handleVoiceInput = () => {
                if (!('webkitSpeechRecognition' in window)) { alert("Navegador no compatible."); return; }
                const recognition = new window.webkitSpeechRecognition();
                recognition.lang = 'es-ES';
                recognition.onstart = () => setIsListening(true);
                recognition.onend = () => setIsListening(false);
                recognition.onresult = (e) => {
                    const text = e.results[0][0].transcript;
                    setPatient(prev => ({...prev, symptoms: prev.symptoms ? prev.symptoms + ' ' + text : text}));
                };
                recognition.start();
            };

            const searchProtocol = () => {
                const text = patient.symptoms.toLowerCase();
                const match = PROTOCOLS_DB.map(p => ({
                    ...p, score: p.target.filter(t => text.includes(t)).length
                })).sort((a,b) => b.score - a.score);
                if (match[0].score > 0) { setSelectedProtocol(match[0]); setActiveSession(0); }
                else alert("No se encontr√≥ coincidencia clara. Seleccione manual.");
            };

            // --- VISTA IMPRESI√ìN ---
            if (showReport && safeProtocol) {
                return (
                    <div className="min-h-screen bg-slate-200 p-8 flex justify-center overflow-auto">
                        <div className="fixed top-4 right-4 flex gap-2 no-print">
                            <button onClick={() => setShowReport(false)} className="bg-slate-500 text-white px-4 py-2 rounded">Cerrar</button>
                            <button onClick={() => window.print()} className="bg-medical-600 text-white px-4 py-2 rounded flex items-center gap-2 font-bold shadow-lg">
                                <Icon name="printer" className="h-5 w-5"/> Imprimir Orden
                            </button>
                        </div>

                        <div id="print-section" className="bg-white w-[21cm] min-h-[29.7cm] p-12 shadow-2xl relative text-sm">
                             {/* Cabecera */}
                             <div className="flex justify-between border-b-2 border-medical-800 pb-4 mb-6">
                                <div className="flex gap-4 items-center">
                                    <div className="bg-medical-600 text-white p-2 rounded-lg">
                                        <Icon name="droplet" className="h-8 w-8"/>
                                    </div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-slate-900">CL√çNICA 4 ELEMENTS</h1>
                                        <p className="text-medical-600 font-bold tracking-wider text-xs">UNIDAD DE MEDICINA REGENERATIVA</p>
                                    </div>
                                </div>
                                <div className="text-right text-slate-500 text-xs">
                                    <p className="font-bold text-slate-700">ORDEN DE TRATAMIENTO IV</p>
                                    <p>Fecha: {new Date().toLocaleDateString()}</p>
                                    <p>Ref: {Math.random().toString(36).substr(2, 6).toUpperCase()}</p>
                                </div>
                            </div>

                            {/* Paciente & Seguridad */}
                            <div className="grid grid-cols-2 gap-6 mb-8">
                                <div className="bg-slate-50 p-4 rounded-lg border border-slate-200">
                                    <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">Paciente</h3>
                                    <p className="text-xl font-bold text-slate-800 capitalize">{patient.name || "Paciente"}</p>
                                    <p className="text-slate-600 text-xs mt-1">Edad: {patient.age} | Sexo: {patient.sex}</p>
                                </div>
                                <div className="bg-red-50 p-4 rounded-lg border border-red-100">
                                    <h3 className="text-xs font-bold text-red-400 uppercase mb-2">Alertas de Seguridad Activas</h3>
                                    <div className="flex flex-wrap gap-2">
                                        {Object.entries(flags).filter(([_,v]) => v).map(([k,_]) => (
                                            <span key={k} className="px-2 py-1 bg-red-100 text-red-700 text-xs font-bold rounded uppercase border border-red-200">
                                                {k.replace('bipolar', 'Bipolaridad').replace('antidepressants', 'Antidepresivos').replace('hypotension', 'Hipotensi√≥n').replace('thyroid', 'Tiroides').replace('migraine', 'Migra√±a')}
                                            </span>
                                        ))}
                                        {!Object.values(flags).some(v=>v) && <span className="text-slate-400 italic">Ninguna</span>}
                                    </div>
                                </div>
                            </div>

                            {/* Detalle Sesi√≥n */}
                            <div className="mb-8">
                                <div className="flex justify-between items-end mb-4">
                                    <div>
                                        <h2 className="text-2xl font-bold text-medical-800">{safeProtocol.name}</h2>
                                        <p className="text-slate-500 font-medium">{currentSession.name}</p>
                                    </div>
                                    <div className="text-right">
                                        <span className="bg-medical-100 text-medical-800 px-3 py-1 rounded text-xs font-bold border border-medical-200">
                                            SESI√ìN {activeSession + 1} DE 3
                                        </span>
                                    </div>
                                </div>

                                {/* Advertencias Din√°micas */}
                                {currentSession.warnings.length > 0 && (
                                    <div className="mb-4 p-3 bg-amber-50 border-l-4 border-amber-500 text-amber-800 text-xs">
                                        <p className="font-bold flex items-center gap-2"><Icon name="alert" className="h-4 w-4"/> MODIFICACIONES DE SEGURIDAD:</p>
                                        <ul className="list-disc pl-5 mt-1">
                                            {currentSession.warnings.map((w,i) => <li key={i}>{w}</li>)}
                                        </ul>
                                    </div>
                                )}

                                {/* Tabla Composici√≥n */}
                                <table className="w-full text-sm border-collapse mb-6">
                                    <thead>
                                        <tr className="bg-slate-100 text-slate-600 border-b border-slate-200">
                                            <th className="p-3 text-left">Componente</th>
                                            <th className="p-3 text-right">Dosis</th>
                                            <th className="p-3 text-center w-24">Verificaci√≥n</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-100">
                                        <tr className="bg-medical-50 font-semibold text-medical-900">
                                            <td className="p-3">{currentSession.base.name}</td>
                                            <td className="p-3 text-right font-mono">{currentSession.base.qty} ml</td>
                                            <td className="p-3 text-center"><div className="w-4 h-4 border border-medical-300 bg-white mx-auto rounded-sm"></div></td>
                                        </tr>
                                        {currentSession.ingredients.map((ing, i) => (
                                            <tr key={i}>
                                                <td className="p-3 text-slate-700">{ing.name}</td>
                                                <td className="p-3 text-right font-mono font-bold">{ing.qty} ml</td>
                                                <td className="p-3 text-center"><div className="w-4 h-4 border border-slate-300 mx-auto rounded-sm"></div></td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>

                                {/* Par√°metros Infusi√≥n */}
                                <div className="grid grid-cols-3 gap-4 text-xs font-medium text-slate-600 bg-slate-50 p-4 rounded border border-slate-200">
                                    <div>
                                        <span className="block text-slate-400 uppercase text-[10px]">Duraci√≥n</span>
                                        <span className="text-lg text-slate-800">{currentSession.duration}</span>
                                    </div>
                                    <div>
                                        <span className="block text-slate-400 uppercase text-[10px]">Velocidad</span>
                                        <span className="text-lg text-slate-800">{currentSession.speed}</span>
                                    </div>
                                    <div>
                                        <span className="block text-slate-400 uppercase text-[10px]">V√≠a</span>
                                        <span className="text-lg text-slate-800">Perif√©rica</span>
                                    </div>
                                </div>
                            </div>

                            {/* Costes Internos (Solo visible para cl√≠nica) */}
                            <div className="mt-8 pt-4 border-t-2 border-dashed border-slate-200 flex justify-between items-center text-xs text-slate-400">
                                <div>
                                    <p>Coste Fungible Incluido: {PRICES.fungible}‚Ç¨</p>
                                    <p>Usuario: Dra. Macias</p>
                                </div>
                                <div className="text-right">
                                    <p className="uppercase font-bold">Coste Total Sesi√≥n (Material)</p>
                                    <p className="text-xl font-mono text-slate-700 font-bold">{calculateCost(currentSession)} ‚Ç¨</p>
                                </div>
                            </div>
                            
                            {/* Footer */}
                            <div className="absolute bottom-12 left-12 right-12 text-center border-t border-slate-200 pt-4">
                                <p className="text-xs text-slate-400">Documento generado por Software Gestor Cl√≠nica 4 Elements v7.0</p>
                            </div>
                        </div>
                    </div>
                );
            }

            // --- VISTA DASHBOARD ---
            return (
                <div className="min-h-screen bg-slate-100 pb-12 font-sans">
                    {/* Header */}
                    <header className="bg-medical-900 text-white sticky top-0 z-50 shadow-md">
                        <div className="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <Icon name="droplet" className="h-6 w-6 text-sky-400"/>
                                <div>
                                    <h1 className="font-bold text-lg leading-none tracking-tight">CL√çNICA 4 ELEMENTS</h1>
                                    <p className="text-xs text-sky-200/80 font-medium">SISTEMA INTELIGENTE IV v7.0</p>
                                </div>
                            </div>
                            <div className="text-xs bg-white/10 px-3 py-1 rounded-full">
                                Dra. Macias
                            </div>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto p-4 grid lg:grid-cols-12 gap-6 mt-4">
                        
                        {/* PANEL IZQUIERDO: PACIENTE + FLAGS */}
                        <div className="lg:col-span-4 space-y-4">
                            {/* Datos Paciente */}
                            <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                                <h2 className="font-bold text-slate-700 flex gap-2 items-center mb-4"><Icon name="user" className="h-5 w-5 text-medical-600"/> Paciente</h2>
                                <div className="space-y-3">
                                    <input type="text" placeholder="Nombre completo" className="w-full p-2.5 bg-slate-50 border border-slate-200 rounded text-sm focus:ring-2 focus:ring-medical-500 outline-none" value={patient.name} onChange={e=>setPatient({...patient, name:e.target.value})}/>
                                    <div className="flex gap-2">
                                        <input type="number" placeholder="Edad" className="w-1/3 p-2.5 bg-slate-50 border border-slate-200 rounded text-sm outline-none focus:ring-2 focus:ring-medical-500" value={patient.age} onChange={e=>setPatient({...patient, age:e.target.value})}/>
                                        <select className="w-2/3 p-2.5 bg-slate-50 border border-slate-200 rounded text-sm text-slate-600 outline-none focus:ring-2 focus:ring-medical-500" value={patient.sex} onChange={e=>setPatient({...patient, sex:e.target.value})}>
                                            <option value="">Sexo</option>
                                            <option>Mujer</option>
                                            <option>Hombre</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            {/* Safety Flags */}
                            <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                                <h2 className="font-bold text-slate-700 flex gap-2 items-center mb-4">
                                    <Icon name="shield" className="h-5 w-5 text-red-500"/>
                                    Safety Flags (Alertas)
                                </h2>
                                <div className="space-y-3">
                                    {[
                                        {key: 'bipolar', label: 'Bipolaridad'},
                                        {key: 'antidepressants', label: 'Antidepresivos / ISRS'},
                                        {key: 'glaucoma', label: 'Glaucoma'},
                                        {key: 'hypotension', label: 'Hipotensi√≥n'},
                                        {key: 'migraine', label: 'Migra√±a'},
                                        {key: 'thyroid', label: 'Anal√≠tica Tiroidea Pr√≥x.'},
                                        {key: 'siboMethane', label: 'SIBO Metano'}
                                    ].map(flag => (
                                        <div key={flag.key} className="flex items-center justify-between p-2 rounded hover:bg-slate-50 transition">
                                            <span className="text-sm font-medium text-slate-600">{flag.label}</span>
                                            <div className="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                                <input type="checkbox" name={flag.key} id={flag.key} className="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300 checked:right-0 checked:border-medical-500 transition-all duration-300"
                                                    checked={flags[flag.key]} onChange={e => setFlags({...flags, [flag.key]: e.target.checked})}/>
                                                <label htmlFor={flag.key} className={`toggle-label block overflow-hidden h-5 rounded-full cursor-pointer transition-colors duration-300 ${flags[flag.key] ? 'bg-medical-500' : 'bg-slate-300'}`}></label>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Buscador */}
                            <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                                <div className="relative">
                                    <textarea placeholder="S√≠ntomas (Ej: sofocos, insomnio...)" className="w-full p-3 pr-10 bg-slate-50 border border-slate-200 rounded h-20 text-sm focus:ring-2 focus:ring-medical-500 outline-none resize-none" value={patient.symptoms} onChange={e=>setPatient({...patient, symptoms:e.target.value})}></textarea>
                                    <button onClick={handleVoiceInput} className={`absolute right-2 bottom-2 p-1.5 rounded-full transition ${isListening ? 'bg-red-500 text-white animate-pulse' : 'bg-slate-200 text-slate-500 hover:text-medical-600'}`}>
                                        <Icon name="mic" className="h-4 w-4"/>
                                    </button>
                                </div>
                                <button onClick={searchProtocol} className="w-full mt-3 bg-medical-800 text-white py-3 rounded-lg font-bold shadow-md hover:bg-medical-900 transition flex justify-center items-center gap-2 text-sm">
                                    <Icon name="search" className="h-4 w-4"/> BUSCAR PROTOCOLO
                                </button>
                            </div>
                        </div>

                        {/* PANEL DERECHO: PROTOCOLOS */}
                        <div className="lg:col-span-8">
                            {safeProtocol ? (
                                <div className="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden fade-in min-h-[600px] flex flex-col">
                                    {/* Cabecera Protocolo */}
                                    <div className="bg-slate-50 p-6 border-b border-slate-200">
                                        <div className="flex justify-between items-start">
                                            <div>
                                                <div className="flex items-center gap-2 mb-1">
                                                    <span className="bg-medical-100 text-medical-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide">Protocolo Recomendado</span>
                                                </div>
                                                <h2 className="text-3xl font-bold text-slate-800">{safeProtocol.name}</h2>
                                                <p className="text-slate-500 font-medium">{safeProtocol.subtext}</p>
                                            </div>
                                            <div className="text-right">
                                                <div className="flex flex-col items-end">
                                                    <span className="text-xs font-bold text-slate-400 uppercase">Ciclo Completo</span>
                                                    <span className="text-lg font-bold text-slate-700">{safeProtocol.sessions.length} Sesiones</span>
                                                    <span className="text-xs text-medical-600 font-medium bg-medical-50 px-2 py-0.5 rounded mt-1">Frecuencia: {safeProtocol.frequency}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Navegaci√≥n Sesiones */}
                                    <div className="flex border-b border-slate-200 bg-white">
                                        {safeProtocol.sessions.map((s, idx) => (
                                            <button key={idx} 
                                                onClick={() => setActiveSession(idx)}
                                                className={`flex-1 py-4 text-sm font-bold border-b-2 transition-colors duration-200 ${activeSession === idx ? 'border-medical-500 text-medical-700 bg-medical-50/50' : 'border-transparent text-slate-400 hover:text-slate-600 hover:bg-slate-50'}`}
                                            >
                                                SESI√ìN {idx + 1}
                                            </button>
                                        ))}
                                    </div>

                                    {/* Detalle Sesi√≥n Activa */}
                                    <div className="p-8 flex-grow">
                                        <div className="flex justify-between items-center mb-6">
                                            <h3 className="text-xl font-bold text-medical-800">{currentSession.name}</h3>
                                            <div className="flex gap-4 text-sm font-medium text-slate-600">
                                                <span className="flex items-center gap-1 bg-slate-100 px-3 py-1 rounded-full"><Icon name="clock" className="h-4 w-4"/> {currentSession.duration}</span>
                                                <span className={`flex items-center gap-1 px-3 py-1 rounded-full ${currentSession.speed.includes('Muy') ? 'bg-amber-100 text-amber-700' : 'bg-slate-100'}`}>Velocidad: {currentSession.speed}</span>
                                            </div>
                                        </div>

                                        {/* ALERTAS MODIFICACION */}
                                        {currentSession.modified && (
                                            <div className="bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-r">
                                                <div className="flex items-start">
                                                    <div className="flex-shrink-0">
                                                        <Icon name="alert" className="h-5 w-5 text-amber-500"/>
                                                    </div>
                                                    <div className="ml-3">
                                                        <h3 className="text-sm font-bold text-amber-800">Protocolo Modificado por Seguridad</h3>
                                                        <div className="mt-1 text-sm text-amber-700">
                                                            <ul className="list-disc list-inside">
                                                                {currentSession.warnings.map((w,i) => <li key={i}>{w}</li>)}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* TABLA INGREDIENTES */}
                                        <div className="bg-white border border-slate-200 rounded-lg overflow-hidden mb-6">
                                            <table className="w-full text-sm">
                                                <thead className="bg-slate-50 text-slate-500 font-medium border-b border-slate-200">
                                                    <tr>
                                                        <th className="px-6 py-3 text-left">Componente</th>
                                                        <th className="px-6 py-3 text-right">Cantidad</th>
                                                        <th className="px-6 py-3 text-right">Coste</th>
                                                    </tr>
                                                </thead>
                                                <tbody className="divide-y divide-slate-100">
                                                    {/* Base */}
                                                    <tr className="bg-medical-50/30">
                                                        <td className="px-6 py-3 font-semibold text-slate-700">{currentSession.base.name}</td>
                                                        <td className="px-6 py-3 text-right font-mono">{currentSession.base.qty} ml</td>
                                                        <td className="px-6 py-3 text-right text-slate-400 font-mono">{(currentSession.base.price).toFixed(2)}‚Ç¨</td>
                                                    </tr>
                                                    {/* Ingredientes */}
                                                    {currentSession.ingredients.map((ing, i) => (
                                                        <tr key={i}>
                                                            <td className="px-6 py-3 text-slate-600">{ing.name}</td>
                                                            <td className="px-6 py-3 text-right font-mono font-bold text-medical-700">{ing.qty} ml</td>
                                                            <td className="px-6 py-3 text-right text-slate-400 font-mono">{(ing.price * ing.qty).toFixed(2)}‚Ç¨</td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>

                                        {/* FOOTER SESI√ìN */}
                                        <div className="flex justify-between items-center mt-auto pt-4 border-t border-slate-100">
                                            <div className="bg-slate-100 text-slate-500 px-4 py-2 rounded-lg text-xs font-mono">
                                                Coste Total (Mat+Fun): <strong>{calculateCost(currentSession)} ‚Ç¨</strong>
                                            </div>
                                            <button onClick={() => setShowReport(true)} className="bg-medical-600 hover:bg-medical-700 text-white px-8 py-3 rounded-lg font-bold shadow-md transform transition hover:-translate-y-0.5 flex items-center gap-2">
                                                <Icon name="printer" className="h-5 w-5"/> GENERAR ORDEN PDF
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {PROTOCOLS_DB.map(p => (
                                        <button key={p.id} onClick={() => { setSelectedProtocol(p); setActiveSession(0); window.scrollTo({top:0, behavior:'smooth'}); }} 
                                            className="bg-white p-6 rounded-xl border border-slate-200 hover:border-medical-400 hover:shadow-lg transition-all duration-300 text-left group flex flex-col h-full">
                                            <div className="flex items-start justify-between mb-2">
                                                <span className="text-lg font-bold text-slate-700 group-hover:text-medical-600 transition-colors">{p.name}</span>
                                            </div>
                                            <p className="text-sm text-slate-500 mb-4">{p.subtext}</p>
                                            <div className="mt-auto flex gap-2">
                                                {p.target.slice(0,3).map((t,i) => (
                                                    <span key={i} className="text-[10px] bg-slate-100 text-slate-500 px-2 py-1 rounded uppercase font-bold">{t}</span>
                                                ))}
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SueroterapiaApp />);
    </script>
</body>
</html>
